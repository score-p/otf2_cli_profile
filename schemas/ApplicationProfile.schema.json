{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://json-schema.org/draft-07/schema#",
  "title": "ApplicationProfile",
  "description": "A profile of an application generated from an OTF 2 trace file.",
  "type": "object",
  "properties": {
      "metaData": {
          "type": "object",
          "description": "Provides information about the processed trace file.",
          "properties": {
              "numberOfLocations": {
                  "type": "integer",
                  "minimum": 1
              },
              "runtime": {
                  "type": "number",
                  "exclusiveMinimum": 0
              },
              "inputFileName": {
                  "type": "string"
              }
          },
          "required": [
              "numberOfLocations",
              "runtime",
              "inputFileName"
          ],
          "additionalProperties": true
      },
      "definitions": {
          "type": "object",
          "description": "",
          "properties": {
              "paradigms": {
                  "type": "array",
                  "items": {
                      "type": "object",
                      "properties": {
                          "paradigmId": {
                              "type": "integer",
                              "minimum": 0
                          },
                          "name": {
                              "type": "string"
                          }
                      },
                      "required": [
                          "paradigmId",
                          "name"
                      ]
                  },
                  "minItems": 1,
                  "uniqueItems": true
              },
              "regions": {
                  "type": "array",
                  "items": {
                      "type": "object",
                      "properties": {
                          "regionId": {
                              "type": "integer",
                              "minimum": 0
                          },
                          "name": {
                              "type": "string"
                          },
                          "paradigmId": {
                              "type": "integer",
                              "minimum": 0
                          },
                          "sourceLine": {
                              "type": "integer",
                              "minimum": 0
                          },
                          "fileName": {
                              "type": "string"
                          }
                      },
                      "required": [
                          "regionId",
                          "name",
                          "paradigmId"
                      ]
                  },
                  "minItems": 1,
                  "uniqueItems": true
              },
              "metrics": {
                  "type": "array",
                  "items": {
                      "type": "object",
                      "properties": {
                          "metricId": {
                              "type": "integer",
                              "minimum": 0
                          },
                          "name": {
                              "type": "string"
                          },
                          "description": {
                              "type": "string"
                          },
                          "metricType": {
                              "type": "integer",
                              "minimum": 0
                          },
                          "metricMode": {
                              "type": "integer",
                              "minimum": 0
                          },
                          "type": {
                              "type": "integer",
                              "minimum": 0
                          },
                          "base": {
                              "type": "integer"
                          },
                          "exponent": {
                              "type": "integer"
                          },
                          "unit": {
                              "type": "string"
                          },
                          "allowed": {
                              "type": "boolean"
                          }
                      },
                      "required": [
                          "metricId",
                          "name",
                          "metricType",
                          "metricMode",
                          "type",
                          "base",
                          "exponent",
                          "unit",
                          "allowed"
                      ]
                  },
                  "minItems": 0,
                  "uniqueItems": true
              }
          }
      },
      "systemTree": {
          "type": "object",
          "properties": {
              "systemTreeNodes": {
                  "$ref": "#/$defs/systemTreeNode"
              },
              "size": {
                  "type": "integer",
                  "minimum": 0
              },
              "numberOfNodesPerLevel": {
                  "type": "array",
                  "items": {
                      "type": "integer",
                      "minimum": 0
                  }
              }
          }
      },
      "callTrees": {
          "type": "array",
          "items": {
              "type": "object",
              "properties": {
                  "rootNode": {
                      "$ref": "#/$defs/callTreeNode"
                  },
                  "depth": {
                      "type": "integer",
                      "minimum": 1
                  },
                  "size": {
                      "type": "integer",
                      "minimum": 1
                  }
              },
              "required": [
                  "rootNode"
              ]
          },
          "minItems": 1,
          "uniqueItems": true
      },
      "summary": {
          "type": "object",
          "properties": {
              "paradigms": {
                  "type": "array",
                  "items": {
                      "$ref": "#/$defs/summaryObject"
                  },
                  "minItems": 1
              },
              "regions": {
                  "type": "array",
                  "items": {
                      "$ref": "#/$defs/summaryObject"
                  },
                  "minItems": 1
              },
              "communications": {
                  "type": "array",
                  "items": {
                      "type": "object",
                      "properties": {
                          "sourceId": {
                              "type": "integer",
                              "minimum": 0
                          },
                          "targetStats": {
                              "type": "array",
                              "items": {
                                  "type": "object",
                                  "properties": {
                                      "targetId": {
                                          "type": "integer"
                                      },
                                      "pointToPointStats": {
                                          "$ref": "#/$defs/countSizeObject"
                                      },
                                      "collectiveStats": {
                                          "$ref": "#/$defs/countSizeObject"
                                      }
                                  },
                                  "required": [
                                      "targetId"
                                  ]
                              },
                              "minItems": 1
                          }
                      },
                      "required": [
                        "sourceId",
                        "targetStats"
                      ]
                  },
                  "minItems": 1
              }
          },
          "required": [
            "paradigms",
            "regions"
          ]
      }
  },
  "$defs": {
      "systemTreeNode": {
          "type": "object",
          "properties": {
              "nodeId": {
                  "type": "integer",
                  "minimum": 0
              },
              "name": {
                  "type": "string"
              },
              "classId": {
                  "type": "integer",
                  "minimum": 0
              },
              "locationId": {
                  "type": "integer",
                  "minimum": 0
              },
              "level": {
                  "type": "integer",
                  "minimum": 0
              },
              "children": {
                  "type": "array",
                  "items": {
                      "#ref": "#"
                  }
              }
          }
      },
      "callTreeNode": {
          "type": "object",
          "properties": {
              "regionId": {
                  "type": "integer",
                  "minimum": 0
              },
              "children": {
                  "type": "array",
                  "items": {
                      "#ref": "#"
                  }
              },
              "nodeData": {
                  "type": "array",
                  "items": {
                      "type": "object",
                      "properties": {
                        "locationId": {
                          "type": "integer",
                          "minimum": 0
                        },
                        "regionStats": {
                          "$ref": "#/$defs/countTimeObject"
                        },
                        "pointToPointStats": {
                          "$ref": "#/$defs/sendReceiveObject"
                        },
                        "collectiveStats": {
                          "$ref": "#/$defs/sendReceiveObject"
                        }
                      },
                      "required": [
                        "locationId",
                        "regionStats"
                      ],
                      "additionalProperties": true
                  },
                  "minItems": 1
              }
          }
      },
      "summaryObject": {
          "type": "object",
          "properties": {
              "id": {
                  "type": "integer",
                  "minimum": 0
              },
              "countTimeStats": {
                  "$refs": "#/$defs/countTimeObject"
              },
              "pointToPointStats": {
                  "$ref": "#/$defs/sendReceiveObject"
              },
              "collectiveStats": {
                  "$ref": "#/$defs/sendReceiveObject"
              }
          },
          "required": [
            "id",
            "countTimeStats"
          ]
      },
      "sendReceiveObject": {
          "type": "object",
          "properties": {
              "send": {
                  "$ref": "#/$defs/countSizeObject"
              },
              "receive": {
                  "$ref": "#/$defs/countSizeObject"
              }
          },
        "required": [
          "send",
          "receive"
        ]
      },
      "countSizeObject": {
          "type": "object",
          "properties": {
              "count": {
                  "$ref": "#/$defs/countObject"
              },
              "size": {
                  "$ref": "#/$defs/minMaxSumObject"
              }
          },
        "required": [
          "count",
          "size"
        ]
      },
      "countTimeObject": {
          "type": "object",
          "properties": {
              "count": {
                  "$ref": "#/$defs/countObject"
              },
              "inclusiveTime": {
                  "$ref": "#/$defs/minMaxSumObject"
              },
              "exclusiveTime": {
                  "$ref": "#/$defs/minMaxSumObject"
              }
          },
        "required": [
          "count",
          "inclusiveTime",
          "exclusiveTime"
        ]
      },
      "minMaxSumObject": {
          "type": "object",
          "properties": {
              "min": {
                  "$ref": "#/$defs/positiveNumberObject"
              },
              "max": {
                  "$ref": "#/$defs/positiveNumberObject"
              },
              "sum": {
                  "$ref": "#/$defs/positiveNumberObject"
              }
          },
          "required": [
              "min",
              "max",
              "sum"
          ]
      },
      "countObject": {
          "type": "integer",
          "minimum": 0
      },
      "positiveNumberObject": {
          "type": "number",
          "minimum": 0
      }
  }
}